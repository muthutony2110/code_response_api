{
    "code": "from flask import Flask, render_template, request\nimport sqlite3\n\napp = Flask(__name__)\n\n# Database setup\ndef get_db_connection():\n    conn = sqlite3.connect('database.db')\n    conn.row_factory = sqlite3.Row\n    return conn\n\n@app.route('/')\ndef index():\n    conn = get_db_connection()\n    bookings = conn.execute('SELECT * FROM bookings').fetchall()\n    conn.close()\n    return render_template('index.html', bookings=bookings)\n\n@app.route('/bookings', methods=['GET', 'POST'])\ndef bookings():\n    if request.method == 'POST':\n        name = request.form['name']\n        date = request.form['date']\n        time = request.form['time']\n        conn = get_db_connection()\n        conn.execute('INSERT INTO bookings (name, date, time) VALUES (?, ?, ?)', (name, date, time))\n        conn.commit()\n        conn.close()\n        return \"Booking added successfully!\"\n    else:\n        return render_template('bookings.html')\n\nif __name__ == '__main__':\n    app.run(debug=True)"}